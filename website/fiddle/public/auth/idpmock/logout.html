<!DOCTYPE html>
<html>

<head>
	<title>Luigi Mock Identity Provider</title>
</head>

<body>
	Logging out...
	<script>
		window.onload = function() {
    let redirectTo = decodeURIComponent(
      window.location.href.match(/post_logout_redirect_uri=(.*?)(&|$)/)[1]
    );
    const decodeChars = (string) => {
      return string.replace(/[<>'*+?^${}()|[\]\\]/g, '\\$&')
    }
    redirectTo = decodeChars(redirectTo);
    if(!redirectTo.startsWith(window.location.origin)) {
      console.warn("post_logout_redirect_uri has wrong input. You are redirected to /auth/logout.html!");
      redirectTo = window.location.origin + '/auth/logout.html';
    }
    window.location.href = redirectTo; 
  };
	</script>
</body>

</html>