<!DOCTYPE html>
<html>

<head>
	<title>Luigi Mock Identity Provider</title>
</head>

<body>
	Logging out...
	<script>
		window.onload = function() {
    let redirectTo = decodeURIComponent(
      window.location.href.match(/post_logout_redirect_uri=(.*?)(&|$)/)[1]
    );
    const stripped = redirectTo.replace(/javascript:/gi, '');
    const escapeRegExp = (string) => {
      return string.replace(/[<>'*+?^${}()|[\]\\]/g, '\\$&')
    }
    redirectTo = escapeRegExp(stripped);
    window.location.href = redirectTo.startsWith(window.location.origin) ? redirectTo : window.location.origin + '/auth/logout.html';
  };
	</script>
</body>

</html>