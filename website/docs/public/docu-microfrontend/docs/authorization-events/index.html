<!doctype html> <head> <meta charset=utf-8> <meta content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=/fundamental-ui/fiori-fundamentals.min.css rel=stylesheet> <link href=global.css rel=stylesheet> <style>.content.svelte-gnxal1 h2{font-size:1.4em;font-weight:500}.content.svelte-gnxal1 pre{background-color:#f9f9f9;box-shadow:inset 1px 1px 5px rgba(0,0,0,.05);padding:.5em;border-radius:2px;overflow-x:auto}.content.svelte-gnxal1 pre code{background-color:transparent;padding:0}.content.svelte-gnxal1 ul{line-height:1.5}.content.svelte-gnxal1 li{margin:0 0 .5em 0}</style> <noscript id=sapper-head-start></noscript><title>authorization-events</title><noscript id=sapper-head-end></noscript> <link href=/client/6cac540496024f0b073f/main.js rel=preload as=script><link href=/client/6cac540496024f0b073f/docs_$slug.4.js rel=preload as=script></head> <body> <div id=sapper> <main class="fd-ui fd-ui--fundamental"> <div class=fd-page> <section class="content fd-section svelte-gnxal1"> <div class="fd-has-margin-bottom-small fd-panel"> <!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> </head> <body> <h1>Authorization events</h1> <p> Luigi provides life cycle events which it can trigger internally or by authorization providers. Events are part of the <strong>auth</strong> configuration object and have to be functions. They can be executed asynchronously. </p> <p>An example events configuration looks as follows:</p> <pre><code>auth: {
  events: {
    onAuthSuccessful: (settings, authData) => {},
    onAuthError: (settings, err) => {}
    onAuthExpired: (settings) => {},
    onLogout: (settings) => {},
    onAuthExpireSoon: (settings) => {}
  }
}
</code></pre> <p> The first parameter is always the current <strong>settings</strong> object of the currently active authorization provider. This object contains the user provider configuration with the default values. The second parameter is optional and it is either <strong>authData</strong> or <strong>error</strong>. </p> <p>You can disable the default behavior of <code>onAuthExpired</code> and <code>onAuthError</code> by making the function return <code>false</code>. As a result, the lifecycle execution stops with this function. This, however, may lead to blank pages after the user logs out since typically the page redirects to a logout, login or home page.</p> <h2>Events</h2> <ul> <li> <p><code>onAuthSuccessful</code> <strong><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function>function</a></strong> is executed after logging in with the <strong>authData</strong> object parameter. If valid authorization data was found in the local storage, the function is not executed.</p> </li> <li> <p><code>onAuthError</code> <strong><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function>function</a></strong> is executed:</p> <ul> <li>by Luigi <strong>reason</strong> URL parameter with optional <strong>error</strong> URL parameter for detailed description was found on Luigi initialization. The OAuth2Provider uses this approach by redirecting from the authorization provider to <code>luigi.domain/?reason=someError&error=Error detail describe</code>.</li> <li>by the OIDC provider if silent access token renewal fails</li> </ul> <p>Return <code>false</code> to prevent redirecting to <code>logoutUrl</code> after executing this function. It goes to the Luigi main route <code>/</code> instead.</p> </li> <li> <p><code>onAuthExpired</code> <strong><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function>function</a></strong> is executed if the token expires during runtime, or if Luigi is opened with outdated authorization data in the local storage. Return <code>false</code> to prevent redirecting to <code>logoutUrl</code> after executing this function.</p> </li> <li> <p><code>onLogout</code> <strong><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function>function</a></strong> is executed after the user logs out.</p> </li> <li> <p><code>onAuthExpireSoon</code> <strong><a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function>function</a></strong> is executed before the token expires. For OAuth2 and OIDC you can set the <strong>accessTokenExpiringNotificationTime</strong> to specify the number of seconds required to pass before the event is fired. The default value is <code>60</code> seconds.</p> <ul> <li>by using oAuth2ImplicitGrant you can specify <strong>expirationCheckInterval</strong> which is the number of seconds to pass between each check if the token is about to expire. The default value is <code>5</code> seconds.</li> </ul> </li> </ul>   </div> </section> </div> </main></div> <script src=/luigi-client/luigi-client.js></script> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{name:"authorization-events.md",shortName:"authorization-events",contents:"\u003C!doctype html\u003E\n\u003Chtml lang=\"en\"\u003E\n  \u003Chead\u003E\n    \u003Cmeta charset=\"utf-8\"\u003E\n    \u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003E\n  \u003C\u002Fhead\u003E\n  \u003Cbody\u003E\n    \u003Ch1\u003EAuthorization events\u003C\u002Fh1\u003E\n    \u003Cp\u003E\n      Luigi provides life cycle events which it can trigger internally or by authorization providers.\n      Events are part of the \u003Cstrong\u003Eauth\u003C\u002Fstrong\u003E configuration object and have to be functions. They can be executed asynchronously.\n    \u003C\u002Fp\u003E\n    \u003Cp\u003EAn example events configuration looks as follows:\u003C\u002Fp\u003E\n    \u003Cpre\u003E\u003Ccode\u003Eauth: {\n  events: {\n    onAuthSuccessful: (settings, authData) =\u003E {},\n    onAuthError: (settings, err) =\u003E {}\n    onAuthExpired: (settings) =\u003E {},\n    onLogout: (settings) =\u003E {},\n    onAuthExpireSoon: (settings) =\u003E {}\n  }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n    \u003Cp\u003E\n      The first parameter is always the current \u003Cstrong\u003Esettings\u003C\u002Fstrong\u003E object of the currently active authorization provider. This object contains the user provider configuration with the default values.\n      The second parameter is optional and it is either \u003Cstrong\u003EauthData\u003C\u002Fstrong\u003E or \u003Cstrong\u003Eerror\u003C\u002Fstrong\u003E.\n    \u003C\u002Fp\u003E\n    \u003Cp\u003EYou can disable the default behavior of \u003Ccode\u003EonAuthExpired\u003C\u002Fcode\u003E and \u003Ccode\u003EonAuthError\u003C\u002Fcode\u003E by making the function return \u003Ccode\u003Efalse\u003C\u002Fcode\u003E. As a result, the lifecycle execution stops with this function. This, however, may lead to blank pages after the user logs out since typically the page redirects to a logout, login or home page.\u003C\u002Fp\u003E\n    \u003Ch2\u003EEvents\u003C\u002Fh2\u003E\n    \u003Cul\u003E\n      \u003Cli\u003E\n        \u003Cp\u003E\u003Ccode\u003EonAuthSuccessful\u003C\u002Fcode\u003E \u003Cstrong\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FStatements\u002Ffunction\"\u003Efunction\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E is executed after logging in with the \u003Cstrong\u003EauthData\u003C\u002Fstrong\u003E object parameter. If valid authorization data was found in the local storage, the function is not executed.\u003C\u002Fp\u003E\n      \u003C\u002Fli\u003E\n      \u003Cli\u003E\n        \u003Cp\u003E\u003Ccode\u003EonAuthError\u003C\u002Fcode\u003E \u003Cstrong\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FStatements\u002Ffunction\"\u003Efunction\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E is executed:\u003C\u002Fp\u003E\n        \u003Cul\u003E\n          \u003Cli\u003Eby Luigi \u003Cstrong\u003Ereason\u003C\u002Fstrong\u003E URL parameter with optional \u003Cstrong\u003Eerror\u003C\u002Fstrong\u003E URL parameter for detailed description was found on Luigi initialization. The OAuth2Provider uses this approach by redirecting from the authorization provider to \u003Ccode\u003Eluigi.domain\u002F?reason=someError&#x26;error=Error detail describe\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n          \u003Cli\u003Eby the OIDC provider if silent access token renewal fails\u003C\u002Fli\u003E\n        \u003C\u002Ful\u003E\n        \u003Cp\u003EReturn \u003Ccode\u003Efalse\u003C\u002Fcode\u003E to prevent redirecting to \u003Ccode\u003ElogoutUrl\u003C\u002Fcode\u003E after executing this function. It goes to the Luigi main route \u003Ccode\u003E\u002F\u003C\u002Fcode\u003E instead.\u003C\u002Fp\u003E\n      \u003C\u002Fli\u003E\n      \u003Cli\u003E\n        \u003Cp\u003E\u003Ccode\u003EonAuthExpired\u003C\u002Fcode\u003E \u003Cstrong\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FStatements\u002Ffunction\"\u003Efunction\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E is executed if the token expires during runtime, or if Luigi is opened with outdated authorization data in the local storage. Return \u003Ccode\u003Efalse\u003C\u002Fcode\u003E to prevent redirecting to \u003Ccode\u003ElogoutUrl\u003C\u002Fcode\u003E after executing this function.\u003C\u002Fp\u003E\n      \u003C\u002Fli\u003E\n      \u003Cli\u003E\n        \u003Cp\u003E\u003Ccode\u003EonLogout\u003C\u002Fcode\u003E \u003Cstrong\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FStatements\u002Ffunction\"\u003Efunction\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E is executed after the user logs out.\u003C\u002Fp\u003E\n      \u003C\u002Fli\u003E\n      \u003Cli\u003E\n        \u003Cp\u003E\u003Ccode\u003EonAuthExpireSoon\u003C\u002Fcode\u003E \u003Cstrong\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fdocs\u002FWeb\u002FJavaScript\u002FReference\u002FStatements\u002Ffunction\"\u003Efunction\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E is executed before the token expires. For OAuth2 and OIDC you can set the \u003Cstrong\u003EaccessTokenExpiringNotificationTime\u003C\u002Fstrong\u003E to specify the number of seconds required to pass before the event is fired. The default value is \u003Ccode\u003E60\u003C\u002Fcode\u003E seconds.\u003C\u002Fp\u003E\n        \u003Cul\u003E\n          \u003Cli\u003Eby using oAuth2ImplicitGrant you can specify \u003Cstrong\u003EexpirationCheckInterval\u003C\u002Fstrong\u003E which is the number of seconds to pass between each check if the token is about to expire. The default value is \u003Ccode\u003E5\u003C\u002Fcode\u003E seconds.\u003C\u002Fli\u003E\n        \u003C\u002Ful\u003E\n      \u003C\u002Fli\u003E\n    \u003C\u002Ful\u003E\n  \u003C\u002Fbody\u003E\n\u003C\u002Fhtml\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');</script><script src=/client/6cac540496024f0b073f/main.js></script> 