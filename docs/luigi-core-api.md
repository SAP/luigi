<!-- meta
{
  "node": {
    "label": "API Reference",
    "category": {
      "label": "Luigi Core"
    },
    "metaData": {
      "categoryPosition": 2,
      "position": 9
    }
  }
}
meta -->

# Luigi Core API

This document outlines the features provided by the Luigi Core API. It covers these topics:

-   [Configuration](#luigi-config) - functions related to Luigi configuration
-   [Elements](#elements) - functions related to DOM elements
-   [Authorization](#authorization) - authorization options for Luigi
-   [Navigation](#luiginavigation) - functions related to Luigi navigation
-   [Localization](#luigii18n) - options related to language, translation, and localization
-   [Custom messages](#custommessages) - custom messages between Luigi Core and micro frontends
-   [UX](#ux) - functions related to Luigi's appearance and user interface

## Luigi Config

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Configuration

#### setConfig

Sets the configuration for Luigi initially. Can also be called at a later point in time again to update the configuration.

##### Parameters

-   `configInput` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** the Luigi Core configuration object

##### Examples

```javascript
Luigi.setConfig({
  navigation: {
    nodes: () => [
      {
        pathSegment: 'home',
        label: 'Home',
        children: [
          {
            pathSegment: 'hello',
            label: 'Hello Luigi!',
            viewUrl: '/assets/basicexternal.html'
          }
        ]
      }
    ]
  },
  routing: {
    useHashRouting: true
  }
})
```

#### getConfig

Returns the current active configuration

##### Examples

```javascript
Luigi.getConfig()
```

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** configuration object

#### configChanged

Tells Luigi that the configuration has been changed. Luigi will update the application or parts of it based on the specified scope.

##### Parameters

-   `scope` **...[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** one or more scope selectors specifying what parts of the configuration were changed. If no scope selector is provided, the whole configuration is considered changed.<p>
    The supported scope selectors are:
    <p>
    <ul>
      <li><code>navigation</code>: the navigation part of the configuration was changed. This includes navigation nodes, the context switcher, the product switcher and the profile menu.</li>
      <li><code>navigation.nodes</code>: navigation nodes were changed.</li>
      <li><code>navigation.contextSwitcher</code>: context switcher related data were changed.</li>
      <li><code>navigation.productSwitcher</code>: product switcher related data were changed.</li>
      <li><code>navigation.profile</code>: profile menu was changed.</li>
      <li><code>settings</code>: settings were changed.</li>
      <li><code>settings.header</code>: header settings (title, icon) were changed.</li>
      <li><code>settings.footer</code>: left navigation footer settings were changed.</li>
    </ul>

#### getConfigValue

Gets value of the given property on Luigi config object. Target can be a value or a synchronous function.

##### Parameters

-   `property` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the object traversal path

##### Examples

```javascript
Luigi.getConfigValue('auth.use')
Luigi.getConfigValue('settings.sideNavFooterText')
```

#### getConfigBooleanValue

Gets boolean value of the given property on Luigi config object.
Function return true if the property value is equal true or 'true'. Otherwise the function returns false.

##### Parameters

-   `property` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the object traversal path

##### Examples

```javascript
Luigi.getConfigBooleanValue('settings.hideNavigation')
```

#### getConfigValueAsync

Gets value of the given property on the Luigi config object.
If the value is a Function it is called (with the given parameters) and the result of that call is the value.
If the value is not a Promise it is wrapped to a Promise so that the returned value is definitely a Promise.

##### Parameters

-   `property` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the object traversal path
-   `parameters` **any** optional parameters that are used if the target is a function

##### Examples

```javascript
Luigi.getConfigValueAsync('navigation.nodes')
Luigi.getConfigValueAsync('navigation.profile.items')
Luigi.getConfigValueAsync('navigation.contextSwitcher.options')
```

#### isAuthorizationEnabled

Detects if authorization is enabled via configuration.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** returns true if authorization is enabled. Otherwise returns false.

**Meta**

-   **deprecated**: now located in Luigi.auth() instead of Luigi

## Luigi.elements()

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Elements

Use these functions to get DOM elements.

#### getLuigiContainer

Returns the container of the Luigi content.

##### Examples

```javascript
Luigi.elements().getLuigiContainer();
```

Returns **[HTMLElement](https://developer.mozilla.org/docs/Web/HTML/Element)** the DOM element that wraps the Luigi content

**Meta**

-   **since**: 0.6.0

#### getShellbar

Returns the shellbar component.

##### Examples

```javascript
Luigi.elements().getShellbar();
```

Returns **[HTMLElement](https://developer.mozilla.org/docs/Web/HTML/Element)** the shellbar DOM element

**Meta**

-   **since**: 0.4.12

#### getShellbarActions

Returns the shellbar actions component.

##### Examples

```javascript
Luigi.elements().getShellbarActions();
```

Returns **[HTMLElement](https://developer.mozilla.org/docs/Web/HTML/Element)** the shellbar actions DOM element

**Meta**

-   **since**: 0.4.12

#### getMicrofrontends

Returns a list of all available micro frontends.

##### Examples

```javascript
Luigi.elements().getMicrofrontends();
```

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;{id: [string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String), active: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean), container: [HTMLElement](https://developer.mozilla.org/docs/Web/HTML/Element), type: (`"main"` \| `"split-view"` \| `"modal"`)}>** list of objects defining all micro frontends from the DOM

**Meta**

-   **since**: 0.6.2

#### getMicrofrontendIframes

Returns all micro frontend iframes including the iframe from the modal if it exists.

##### Examples

```javascript
Luigi.elements().getMicrofrontendIframes();
```

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[HTMLElement](https://developer.mozilla.org/docs/Web/HTML/Element)>** an array of all micro frontend iframes from the DOM

**Meta**

-   **since**: 0.4.12

#### getCurrentMicrofrontendIframe

Returns the active micro frontend iframe.
If there is a modal, which includes the micro frontend iframe, the function returns this iframe.

##### Examples

```javascript
Luigi.elements().getCurrentMicrofrontendIframe();
```

Returns **[HTMLElement](https://developer.mozilla.org/docs/Web/HTML/Element)** the active micro frontend iframe DOM element

**Meta**

-   **since**: 0.4.12

## Luigi.auth()

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Authorization

Authorization helpers

#### isAuthorizationEnabled

Detects if authorization is enabled via configuration.
Read more about [custom authorization providers](authorization-configuration.md).

##### Examples

```javascript
Luigi.auth().isAuthorizationEnabled();
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** `true` if authorization is enabled. Otherwise returns `false`.

### AuthorizationStore

Authorization Storage helpers, to be used in your custom authorization provider.
Read more about custom authorization providers [here](authorization-configuration.md#implement-a-custom-authorization-provider).

#### getStorageKey

Retrieves the key name that is used to store the auth data.

##### Examples

```javascript
Luigi.auth().store.getStorageKey()
```

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** name of the store key

#### getStorageType

Retrieves the storage type that is used to store the auth data.

##### Examples

```javascript
Luigi.auth().store.getStorageType()
```

Returns **(`"localStorage"` \| `"sessionStorage"` \| `"none"`)** storage type

#### getAuthData

Retrieves the current auth object.

##### Examples

```javascript
Luigi.auth().store.getAuthData()
```

Returns **[AuthData](#authdata)** the current auth data object

#### setAuthData

Sets authorization data

##### Parameters

-   `data` **[AuthData](#authdata)** new auth data object

##### Examples

```javascript
Luigi.auth().store.setAuthData(data)
```

#### removeAuthData

Clears authorization data from store

##### Examples

```javascript
Luigi.auth().store.removeAuthData()
```

#### setNewlyAuthorized

Defines a new authorization session. Must be triggered after initial `setAuthData()` in order to trigger **onAuthSuccessful** event after login.

##### Examples

```javascript
Luigi.auth().store.setNewlyAuthorized()
```

### AuthData

Authorization object that is stored in auth store and used within Luigi. It is then available in [LuigiClient.addInitListener](luigi-client-api.md#addInitListener) and can also be used in the Core configuration.

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### Properties

-   `accessToken` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** access token value
-   `accessTokenExpirationDate` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** timestamp value
-   `scope` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** scope, can be empty if it is not required
-   `idToken` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** id token, used for renewing authentication

## Luigi.navigation()

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### LuigiNavigation

Use these functions for navigation-related features.

#### updateTopNavigation

Refreshes top navigation badge counters by rendering the navigation again.

##### Examples

```javascript
Luigi.navigation().updateTopNavigation();
```

#### navigate

Navigates to the given path in the application. It contains either a full absolute path or a relative path without a leading slash that uses the active route as a base. This is the standard navigation.

##### Parameters

-   `path` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** path to be navigated to
-   `preserveView` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** preserve a view by setting it to `true`. It keeps the current view opened in the background and opens the new route in a new frame. Use the [goBack()](#goBack) function to navigate back. You can use this feature across different levels. Preserved views are discarded as soon as you use the standard [navigate()](#navigate) function instead of [goBack()](#goBack)
-   `modalSettings` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** opens a view in a modal. Use these settings to configure the modal's title and size
    -   `modalSettings.title` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** modal title. By default, it is the node label. If there is no label, it is left empty
    -   `modalSettings.size` **(`"l"` \| `"m"` \| `"s"`)** size of the modal (optional, default `"l"`)

##### Examples

```javascript
Luigi.navigation().navigate('/overview')
Luigi.navigation().navigate('users/groups/stakeholders')
Luigi.navigation().navigate('/settings', null, true) // preserve view
```

#### openAsModal

Opens a view in a modal. You can specify the modal's title and size. If you don't specify the title, it is the node label. If there is no node label, the title remains empty.  The default size of the modal is `l`, which means 80%. You can also use `m` (60%) and `s` (40%) to set the modal size. Optionally, use it in combination with any of the navigation functions.

##### Parameters

-   `path` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** navigation path
-   `modalSettings` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** opens a view in a modal. Use these settings to configure the modal's title and size
    -   `modalSettings.title` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** modal title. By default, it is the node label. If there is no label, it is left empty
    -   `modalSettings.size` **(`"l"` \| `"m"` \| `"s"`)** size of the modal (optional, default `"l"`)

##### Examples

```javascript
Luigi.navigation().openAsModal('projects/pr1/users', {title:'Users', size:'m'});
```

#### fromContext

Sets the current navigation context to that of a specific parent node which has the [navigationContext](navigation-configuration.md) field declared in the navigation configuration. This navigation context is then used by the `navigate` function.

##### Parameters

-   `navigationContext` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

##### Examples

```javascript
Luigi.navigation().fromContext('project').navigate('/settings')
```

Returns **linkManager** link manager instance

#### fromClosestContext

Sets the current navigation context which is then used by the `navigate` function. This has to be a parent navigation context, it is not possible to use the child navigation contexts.

##### Examples

```javascript
Luigi.navigation().fromClosestContext().navigate('/users/groups/stakeholders')
```

Returns **linkManager** link manager instance

#### withParams

Sends node parameters to the route. The parameters are used by the `navigate` function. Use it optionally in combination with any of the navigation functions and receive it as part of the context object in Luigi Client.

##### Parameters

-   `nodeParams` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

##### Examples

```javascript
Luigi.navigation().withParams({foo: "bar"}).navigate("path")

// Can be chained with context setting functions such as:
Luigi.navigation().fromContext("currentTeam").withParams({foo: "bar"}).navigate("path")
```

Returns **linkManager** link manager instance

#### pathExists

Checks if the path you can navigate to exists in the main application. For example, you can use this helper method conditionally to display a DOM element like a button.

##### Parameters

-   `path` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** path which existence you want to check

##### Examples

```javascript
let pathExists;
 Luigi
 .navigation()
 .pathExists('projects/pr2')
 .then(
   (pathExists) => {  }
 );
```

Returns **[promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** a promise which resolves to a Boolean variable specifying whether the path exists or not

#### hasBack

Checks if there is one or more preserved views. You can use it to show a **back** button.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** indicating if there is a preserved view you can return to

#### goBack

Discards the active view and navigates back to the last visited view. Works with preserved views, and also acts as the substitute of the browser **back** button. **goBackContext** is only available when using preserved views.

##### Parameters

-   `goBackValue` **any** data that is passed in the **goBackContext** field to the last visited view when using preserved views

##### Examples

```javascript
Luigi.navigation().goBack({ foo: 'bar' });
Luigi.navigation().goBack(true);
```

## Luigi.i18n()

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### LuigiI18N

Localization-related functions.

#### getCurrentLocale

Gets the current locale.

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** current locale

**Meta**

-   **since**: 0.5.3

#### setCurrentLocale

Sets current locale to the specified one.

##### Parameters

-   `locale` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** locale to be set as the current locale

**Meta**

-   **since**: 0.5.3

#### addCurrentLocaleChangeListener

Registers a listener for locale changes.

##### Parameters

-   `listener` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** function called on every locale change with the new locale as argument

Returns **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** listener ID associated with the given listener; use it when removing the listener

**Meta**

-   **since**: 0.5.3

#### removeCurrentLocaleChangeListener

Unregisters a listener for locale changes.

##### Parameters

-   `listenerId` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** listener ID associated with the listener to be removed, returned by addCurrentLocaleChangeListener

**Meta**

-   **since**: 0.5.3

#### getTranslation

Gets translated text for the specified key in the current locale or in the specified one.
Property values for token replacement in the localization key will be taken from the specified interpolations object.

##### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** key to be translated
-   `interpolations` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** objects with properties that will be used for token replacements in the localization key (optional, default `undefined`)
-   `locale` **locale** optional locale to get the translation for; default is the current locale (optional, default `undefined`)

## Luigi.customMessages()

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### CustomMessages

Functions related to custom messages.

#### sendToAll

Sends a custom message to all opened micro frontends.

##### Parameters

-   `message` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** an object containing data to be sent to the micro frontend to process it further. This object is set as an input parameter of the custom message listener on the micro frontend side.
    -   `message.id` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the message
    -   `message.MY_DATA_FIELD` **any** any other message data field

##### Examples

```javascript
Luigi.customMessages().sendToAll({
    id: 'myprefix.my-custom-message-for-client',
    dataField1: 'here goes some data',
    moreData: 'here goes some more'
});
```

**Meta**

-   **since**: 0.6.2

#### send

Sends a message to specific micro frontend identified with an id.
Use Luigi.elements().getMicrofrontends() to get the iframe id.

##### Parameters

-   `microfrontendId` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** the id of the micro frontend
-   `message` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** an object containing data to be sent to the micro frontend to process it further. This object is set as an input parameter of the custom message listener on the micro frontend side
    -   `message.id` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** the id of the message
    -   `message.MY_DATA_FIELD` **any** any other message data field

##### Examples

```javascript
Luigi.customMessages().send(microfrontend.id, {
    id: 'myprefix.my-custom-message-for-client',
    dataField1: 'here goes some data',
    moreData: 'here goes some more'
});
```

**Meta**

-   **since**: 0.6.2

## Luigi.ux()

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### UX

Functions to use Luigi Core UX features.

#### hideAppLoadingIndicator

Hides the app loading indicator.

**Meta**

-   **since**: 0.6.4

#### showAlert

Shows an alert.

##### Parameters

-   `settings` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** the settings for the alert
    -   `settings.text` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the content of the alert. To add a link to the content, you have to set up the link in the `links` object. The key(s) in the `links` object must be used in the text to reference the links, wrapped in curly brackets with no spaces. If you don't specify any text, the alert is not displayed
    -   `settings.type` **(`"info"` \| `"success"` \| `"warning"` \| `"error"`)** sets the type of alert
    -   `settings.links` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** provides links data
        -   `settings.links.LINK_KEY` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** object containing the data for a particular link. To properly render the link in the alert message refer to the description of the **settings.text** parameter
            -   `settings.links.LINK_KEY.text` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** text which replaces the link identifier in the alert content
            -   `settings.links.LINK_KEY.url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** url to navigate when you click the link. Currently, only internal links are supported in the form of relative or absolute paths
    -   `settings.closeAfter` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** (optional) time in milliseconds that tells Luigi when to close the Alert automatically. If not provided, the Alert will stay on until closed manually. It has to be greater than `100`

##### Examples

```javascript
const settings = {
 text: "Ut enim ad minim veniam, {goToHome} quis nostrud exercitation ullamco {relativePath}. Duis aute irure dolor {goToOtherProject}",
 type: 'info',
 links: {
   goToHome: { text: 'homepage', url: '/overview' },
   goToOtherProject: { text: 'other project', url: '/projects/pr2' },
   relativePath: { text: 'relative hide side nav', url: 'hideSideNav' }
 },
 closeAfter: 3000
}
Luigi
 .ux()
 .showAlert(settings)
 .then(() => {
    // Logic to execute when the alert is dismissed
 });
```

Returns **[promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** which is resolved when the alert is dismissed

**Meta**

-   **since**: 0.6.4

#### showConfirmationModal

Shows a confirmation modal.

##### Parameters

-   `settings` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** the settings of the confirmation modal. If you do not provide any value for any of the fields, a default value is used
    -   `settings.header` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the content of the modal header (optional, default `"Confirmation"`)
    -   `settings.body` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the content of the modal body (optional, default `"Are you sure you want to do this?"`)
    -   `settings.buttonConfirm` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the label for the modal confirm button (optional, default `"Yes"`)
    -   `settings.buttonDismiss` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the label for the modal dismiss button (optional, default `"No"`)

##### Examples

```javascript
const settings = {
 header: "Confirmation",
 body: "Are you sure you want to do this?",
 buttonConfirm: "Yes",
 buttonDismiss: "No"
}
Luigi
 .ux()
 .showConfirmationModal(settings)
 .then(() => {
    // Logic to execute when the confirmation modal is dismissed
 });
```

Returns **[promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** which is resolved when accepting the confirmation modal and rejected when dismissing it

**Meta**

-   **since**: 0.6.4
