{#if children && pathData.length > 1}
<nav class="fd-tabs {hideNavComponent ? 'hideNavComponent' : ''}" role="tablist">
	{#each Object.entries(children) as [key, nodes]} {#if key === 'undefined'}
  {#each nodes as node} {#if !node.hideFromNav} {#if node.label}
  <span class="fd-tabs__item">
		<a class="fd-tabs__link" href="javascript:void(null)" role="tab" aria-selected="{node === selectedNode}"
      on:click="handleClick(node)">
			{node.label}
		</a>
	</span>
  {/if} {/if} {/each}
  {/if}{/each}
</nav>
{/if}


<script type="text/javascript">
  import * as Navigation from './services/navigation.js';
  import * as NavigationHelpers from '../utilities/helpers/navigation-helpers';
  import { LuigiConfig } from '../services/config.js';

  const setLeftNavData = async (current, component) => {
    const componentData = component.get();
    const leftNavData = await Navigation.getLeftNavData(current, componentData);
    if (!leftNavData) {
      return;
    }
    component.set(leftNavData);
    window.LEFTNAVDATA = leftNavData.groupedChildren;
  };

  export default {
    oncreate() {
      this.set({
        hideNavComponent: LuigiConfig.getConfigBooleanValue(
          'settings.hideNavigation'
        ),
        expandedCategories: NavigationHelpers.loadExpandedCategories()
      });
    },
    onstate({ changed, current, previous }) {
      if (!previous || previous.pathData != current.pathData) {
        setLeftNavData(current, this);
      }
    },
    helpers: {
      isOpenUIiconName(name) {
        return NavigationHelpers.isOpenUIiconName(name);
      },
      isExpanded(nodes, expandedList) {
        return (
          expandedList && expandedList.indexOf(nodes.metaInfo.categoryUid) >= 0
        );
      }
    },
    methods: {
      handleClick(node) {
        this.fire('handleClick', { node });
      },

      setExpandedState(nodes, value) {
        this.set({
          expandedCategories: NavigationHelpers.storeExpandedState(
            nodes.metaInfo.categoryUid,
            value
          )
        });
      }
    }
  };
</script>

<style type="text/scss">
</style>
